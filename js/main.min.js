function mainFunction() {
    //选择自取还是送货上门
    var pickup = document.getElementById('selfpickup');
    var delivery = document.getElementById('delivery');

    if (pickup.checked) {
        document.getElementById('bg-quantity').disabled = false;
        document.getElementById('hj-quantity').disabled = false;
        document.getElementById('ng-quantity').disabled = false;
        document.getElementById("select-cover-1").removeAttribute("onclick");
        document.getElementById("select-cover-2").removeAttribute("onclick");
        document.getElementById("select-cover-3").removeAttribute("onclick");
        document.getElementById("summary-shipping").style.display = "none";
        document.getElementById("address-box").style.display = "none";
        document.getElementById("pick-box").style.display = "block";
    } else if (delivery.checked) {
        document.getElementById('bg-quantity').disabled = false;
        document.getElementById('hj-quantity').disabled = false;
        document.getElementById('ng-quantity').disabled = false;
        document.getElementById("select-cover-1").removeAttribute("onclick");
        document.getElementById("select-cover-2").removeAttribute("onclick");
        document.getElementById("select-cover-3").removeAttribute("onclick");
        document.getElementById("summary-shipping").style.display = "block";
        document.getElementById("address-box").style.display = "block";
        document.getElementById("pick-box").style.display = "none";
    } else {
        document.getElementById('bg-quantity').disabled = true;
        document.getElementById('hj-quantity').disabled = true;
        document.getElementById('ng-quantity').disabled = true;
        document.getElementById("summary-shipping").style.display = "none";
        document.getElementById("address-box").style.display = "block";
        document.getElementById("pick-box").style.display = "block";
    }

    //白果一包五片
    var bgprice = 4; //RM4.00
    var bgquantity = document.getElementById("bg-quantity").value;
    var bgtotal = bgprice * bgquantity;
    document.getElementById("bg-totalprice").innerHTML = "RM " + bgtotal.toFixed(2);

    //红酒
    var hjprice = 15; //RM15
    var hjquantity = document.getElementById("hj-quantity").value;
    var hjtotal = hjprice * hjquantity;
    document.getElementById("hj-totalprice").innerHTML = "RM " + hjtotal.toFixed(2);

    //年糕
    var ngprice = 4; //RM4.00
    var ngquantity = document.getElementById("ng-quantity").value;
    var ngtotal = ngprice * ngquantity;
    document.getElementById("ng-totalprice").innerHTML = "RM " + ngtotal.toFixed(2);

    //小计
    var subtotal = bgtotal + hjtotal + ngtotal;
    document.getElementById("subtotal").innerHTML = "RM " + subtotal.toFixed(2);

    //运输
    var original = 0;
    var pay3 = 3;
    var pay5 = 5;
    if (pickup.checked) {
        document.getElementById("shipping").innerHTML = "RM " + original.toFixed(2);
    } else if (delivery.checked && subtotal < 0.01) {
        document.getElementById("shipping").innerHTML = "RM " + original.toFixed(2);
    } else if (delivery.checked && subtotal > 39.99 && subtotal < 49.99) {
        document.getElementById("shipping").innerHTML = "RM " + pay3.toFixed(2);
    } else if (delivery.checked && subtotal > 49.99) {
        document.getElementById("shipping").innerHTML = "免费";
    } else {
        document.getElementById("shipping").innerHTML = "RM " + pay5.toFixed(2);
    }

    //总数
    if (pickup.checked) {
        var total = subtotal;
        document.getElementById("total").innerHTML = "RM " + total.toFixed(2);
        document.getElementById("product-select-total").innerHTML = "总数：RM" + total.toFixed(2);
        document.getElementById("summary-total").innerHTML = "您的订单总价为" + total.toFixed(2) + "令吉。";
        document.getElementById("summary-total").style.color = "#6667AA";
    } else if (delivery.checked && subtotal < 0.01) {
        var total = subtotal + original;
        document.getElementById("total").innerHTML = "RM " + total.toFixed(2);
        document.getElementById("product-select-total").innerHTML = "总数：RM" + total.toFixed(2);
        document.getElementById("summary-total").innerHTML = "您的订单总价为" + total.toFixed(2) + "令吉。";
        document.getElementById("summary-total").style.color = "#6667AA";
    } else if (delivery.checked && subtotal > 39.99 && subtotal < 49.99) {
        var total = subtotal + pay3;
        document.getElementById("total").innerHTML = "RM " + total.toFixed(2);
        document.getElementById("product-select-total").innerHTML = "总数：RM" + total.toFixed(2);
        document.getElementById("summary-total").innerHTML = "您的订单总价为" + total.toFixed(2) + "令吉。";
        document.getElementById("summary-total").style.color = "#6667AA";
    } else if (delivery.checked && subtotal > 49.99) {
        var total = subtotal + original;
        document.getElementById("total").innerHTML = "RM " + total.toFixed(2);
        document.getElementById("product-select-total").innerHTML = "总数：RM" + total.toFixed(2);
        document.getElementById("summary-total").innerHTML = "您的订单总价为" + total.toFixed(2) + "令吉。";
        document.getElementById("summary-total").style.color = "#6667AA";
    } else {
        var total = subtotal + pay5;
        document.getElementById("total").innerHTML = "RM " + total.toFixed(2);
        document.getElementById("product-select-total").innerHTML = "总数：RM" + total.toFixed(2);
        document.getElementById("summary-total").innerHTML = "您的订单总价为" + total.toFixed(2) + "令吉。";
        document.getElementById("summary-total").style.color = "#6667AA";
    }

    //隐藏讯息
    if (bgquantity > 0) {
        document.getElementById("customer").style.display = "block";
    } else if (hjquantity > 0) {
        document.getElementById("customer").style.display = "block";
    } else if (ngquantity > 0) {
        document.getElementById("customer").style.display = "block";
    } else {
        document.getElementById("customer").style.display = "none";
    }
}

function myCheck() {
    var select = document.getElementsByTagName('select');

    //提醒 先选择物流
    if (select.disabled = true) {
        document.getElementById('summary-total').innerHTML = "请先选择物流";
        document.getElementById('summary-total').style.color = "#F4C282";
        window.scrollBy(0, -5000);
    }
}

function myFill() {
    var name = document.getElementById("name");
    var namebox = document.getElementById("text-box-1");
    if (name.value.length > 0) {
        name.classList.add("form-textbox-entered");
        namebox.classList.remove("is-error");

    } else {
        name.classList.remove("form-textbox-entered");
        namebox.classList.add("is-error");
    }
}

function myFill2() {
    var hp = document.getElementById("hpnumber");
    var hpbox = document.getElementById("text-box-2");
    if (hp.value.length > 0) {
        hp.classList.add("form-textbox-entered");
        hpbox.classList.remove("is-error");

    } else {
        hp.classList.remove("form-textbox-entered");
        hpbox.classList.add("is-error");
    }
}

function myFill3() {
    var addr = document.getElementById("address");
    var addrbox = document.getElementById("text-box-3");
    var pickup = document.getElementById('selfpickup');
    if (addr.value.length > 0) {
        addr.classList.add("form-textbox-entered");
        addrbox.classList.remove("is-error");
        pickup.disabled = true; //如果地址栏有字 不能选择自取
    } else {
        addr.classList.remove("form-textbox-entered");
        addrbox.classList.add("is-error");
        pickup.disabled = false;
    }
}

function myFill4() {
    var date = document.getElementById("date");
    var datebox = document.getElementById("text-box-4");
    if (date.value.length > 0) {
        date.classList.add("form-textbox-entered");
        datebox.classList.remove("is-error");
    } else {
        date.classList.remove("form-textbox-entered");
        datebox.classList.add("is-error");
    }
}

function myFill5() {
    var mpickup = document.getElementById("pickup");
    var pickupbox = document.getElementById("text-box-5");
    var delivery = document.getElementById('delivery');
    if (mpickup.value.length > 0) {
        pickupbox.classList.remove("is-error");
        delivery.disabled = true; //如果取货地点被选择，不能选择送货上门
    } else {
        pickupbox.classList.add("is-error");
        delivery.disabled = false;
    }
}

function myGeB() {
    var nameG = document.getElementById("name");
    var hpG = document.getElementById("hpnumber");

    if (nameG.value.length > 0 && hpG.value.length > 0) {
        document.getElementById("form-button").disabled = false;
    } else {
        document.getElementById("form-button").disabled = true;
    }
}

function myInfo() {
    var pickup = document.getElementById('selfpickup');
    var delivery = document.getElementById('delivery');

    if (pickup.checked) {
        document.getElementById("shipping-select").innerHTML = "<b>" + pickup.name + "：</b>" + pickup.value;
    } else if (delivery.checked) {
        document.getElementById("shipping-select").innerHTML = "<b>" + delivery.name + "：</b>" + delivery.value;
    } else {
        document.getElementById("shipping-select").innerHTML = "<b>" + pickup.name + "：</b>" + "您还没进行选择！";
    }

    var bgqua = document.getElementById('bg-quantity');
    if (bgqua.value > 0) {
        document.getElementById("product-select-bg").innerHTML = "<b>" + bgqua.name + "：</b>" + bgqua.value + "包";
    }

    var hjqua = document.getElementById('hj-quantity');
    if (hjqua.value > 0) {
        document.getElementById("product-select-hj").innerHTML = "<b>" + hjqua.name + "：</b>" + hjqua.value + "瓶";
    }

    var ngqua = document.getElementById('ng-quantity');
    if (ngqua.value > 0) {
        document.getElementById("product-select-ng").innerHTML = "<b>" + ngqua.name + "：</b>" + ngqua.value + "块";
    }

    var cname = document.getElementById('name');
    if (cname.value.length > 0) {
        document.getElementById("customer-name").innerHTML = "<b>" + cname.name + "：</b>" + cname.value;
    }

    var chpn = document.getElementById('hpnumber');
    if (chpn.value.length > 0) {
        document.getElementById("customer-hp").innerHTML = "<b>" + chpn.name + "：</b>" + chpn.value;
    }

    var cadd = document.getElementById('address');
    if (cadd.value.length > 0) {
        document.getElementById("customer-address").innerHTML = "<b>" + cadd.name + "：</b>" + cadd.value;
    }

    var cpicku = document.getElementById('pickup');
    if (cpicku.value.length > 0) {
        document.getElementById("customer-pickup").innerHTML = "<b>" + cpicku.name + "：</b>" + cpicku.value;
    }

    var cdate = document.getElementById('date');
    if (cdate.value.length > 0) {
        document.getElementById("customer-date").innerHTML = "<b>" + cdate.name + "：</b>" + cdate.value;
    }

    document.getElementById("info").style.display = "block";
    document.getElementById('btn').style.display = "block";
}

function screenshot() {

    document.getElementById('btn').style.display = "none";
    var htmlDom = document.getElementById('photo');
    var scale = 1;

    html2canvas(htmlDom, {
        dpi: window.devicePixelRatio * 1,
        scale: scale,
        logging: false,
        useCORS: true
    }).then(canvas => {
        let link = document.createElement("a");
        link.href = canvas.toDataURL(); //下载链接
        link.setAttribute("download", "订单.png");
        link.style.display = "none"; //a标签隐藏
        document.body.appendChild(link);
        link.click();
    });
}